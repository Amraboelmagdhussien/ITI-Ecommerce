<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="products.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100;300;500;700;900&display=swap"
      rel="stylesheet"
    />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@100;300;500;700;900&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="registerationStyles.css">
    <title>Registeration</title>
  </head>
  <body>
    <header>
      <div class="container">
        <nav class="header">
          <div class="logo">
            <!-- logo here -->
            <h1>Store Name</h1>
          </div>

          <div class="postion">
            <!-- Search here-->
            <input class="search-bar" type="text" placeholder="Search..." />
            <button class="srch-btn">Search</button>
          </div>

          <div class="icons">
            <!--Icons -->
            <div class="iconLay">
              <i class="fa-solid fa-user"></i>
              <a href="#">Profile</a>
            </div>

            <div class="iconLay">
              <i class="fa-regular fa-message"></i>
              <a href="#">Message</a>
            </div>

            <div class="iconeLay">
              <i class="fa-solid fa-heart"></i>
              <a href="#">My Orders</a>
            </div>
            <div class="iconLay">
              <i class="fa-solid fa-cart-shopping"></i>
              <a href="#">My Cart</a>
            </div>
          </div>
        </nav>

        <nav class="header-2">
          <div class="categories-1">
            <ul>
              <li class="dropDownList">
                <div>
                  <i class="fa-solid fa-list test"></i>
                  <span>All Category</span>
                </div>
                <ul>
                  <li>Cate 1 Cate 1 Cate 1 Cate 1 Cate 1s</li>
                  <li>Cate 1</li>
                  <li>Cate 1</li>
                  <li>Cate 1</li>
                  <li>Cate 1</li>
                </ul>
              </li>
              <li><a href="#">Hot offers</a></li>
              <li><a href="#">Gift Boxes</a></li>
              <li><a href="#">Projects</a></li>
              <li><a href="#">Menu Item</a></li>
              <li><a href="#">Help</a></li>
            </ul>
          </div>

          <div class="info-1">
            <ul>
              <li>English, USD <i class="fa-solid fa-caret-down"></i></li>

              <li id="shipmentSelector" class="dropDownList">
                <div>
                  <span>Ship To</span>
                  <img class="imgIcon" src="/Flags/EG.png" alt="EG" />
                  <i class="fa-solid fa-caret-down"></i>
                </div>
                <ul>
                  <li>
                    <span>EG </span>
                    <img class="imgIcon" src="/Flags/EG.png" alt="EG" />
                  </li>
                  <li>
                    <span>DE</span
                    ><img class="imgIcon" src="/Flags/DE.png" alt="DE" />
                  </li>
                  <li>
                    <span>USA</span
                    ><img class="imgIcon" src="/Flags/US.png" alt="USA" />
                  </li>
                </ul>
              </li>
            </ul>
          </div>
        </nav>
      </div>
    </header>
    <div class="body">
      <div class="containerReg" id="containerReg">
        <div id="signUpContainer" class="sign-up-container">
            <form id="registrationForm">
                <h1>Create Account</h1>
                <input class="input" type="text" id="name" placeholder="Username" required>
                <input class="input"type="email" id="email" placeholder="Email" required>
                <input class="input"type="password" id="pass" placeholder="Password" required>
                <select id="userType" required>
                    <option value="admin">Admin</option>
                    <option value="customer">Customer</option>
                </select>
                <button class="button" type="button" onclick="register()">Register</button>
            </form>
        </div>
        <div id="signInContainer" class="sign-in-container">
            <form id="loginForm">
                <h1>Login</h1>
                <input class="input" type="email" id="loginEmail" placeholder="Email" required>
                <input class="input" type="password" id="loginPassword" placeholder="Password" required>
                <button class="button" type="button" onclick="login()">Login</button>
            </form>
        </div>
        <div class="overlay-container">
            <div class="overlay">
                <div class="overlay-panel overlay-left">
                    <h1>Welcome Back!</h1>
                    <p>To keep connected with us please login with your personal info</p>
                    <button class="button" class="ghost" onclick="switchForm('sign-in-container')">Login</button>
                </div>
                <div class="overlay-panel overlay-right">
                    <h1>Hello, Friend!</h1>
                    <p>Enter your personal details and start journey with us</p>
                    <button class="button" class="ghost" onclick="switchForm('sign-up-container')">Register</button>
                    <button class="button" id="signInButton">Sign In / Register</button>
                    <button class="button" id="signOutButton">Sign Out</button>
                    <p id="message">You have signed in as: <span id="userName"></span> with Email: <span id="userEmail"></span></p>
                </div>
            </div>
        </div>
      </div>
    </div>
    <!-- <script src="https://accounts.google.com/gsi/client" async></script>
    <div id="g_id_onload"
        data-client_id="YOUR_GOOGLE_CLIENT_ID"
        data-login_uri="https://your.domain/your_login_endpoint"
        data-auto_prompt="false">
    </div>
    <div class="g_id_signin"
        data-type="standard"
        data-size="large"
        data-theme="outline"
        data-text="sign_in_with"
        data-shape="rectangular"
        data-logo_alignment="left">
    </div> -->
    <footer class="container">
      <div class="sub-container-2">
        <div class="flexed-div">
          <div class="sub-div">
            <p class="logo-brand-store">Logo here</p>
            <p class="store-info">
              Lorem ipsum dolor sit amet consectetur, adipisicing elit.
              Molestiae facilis obcaecati delectus rem suscipit sint?
            </p>
          </div>
          <div class="social-logos">
            <a href=""><i class="fa-brands fa-instagram"></i></a>
            <a href=""><i class="fa-brands fa-facebook"></i></a>
            <a href=""><i class="fa-brands fa-linkedin"></i></a>
          </div>
        </div>

        <div class="flexed-div">
          <p class="sec-header">About Us</p>
          <ul>
            <li><a href="">About Us</a></li>
            <li><a href="">Find Store</a></li>
            <li><a href="">Categories</a></li>
            <li><a href="">Blogs</a></li>
          </ul>
        </div>
        <div class="flexed-div">
          <p class="sec-header">Partnership</p>
          <ul>
            <li><a href="">About Us</a></li>
            <li><a href="">Find Store</a></li>
            <li><a href="">Categories</a></li>
            <li><a href="">Blogs</a></li>
          </ul>
        </div>
        <div class="flexed-div">
          <p class="sec-header">Information</p>
          <ul>
            <li><a href="">About Us</a></li>
            <li><a href="">Find Store</a></li>
            <li><a href="">Categories</a></li>
            <li><a href="">Blogs</a></li>
          </ul>
        </div>
        <div class="flexed-div">
          <p class="sec-header">For Users</p>
          <ul>
            <li><a href="">Login</a></li>
            <li><a href="">Register</a></li>
          </ul>
        </div>
        <div class="flexed-div">
          <p>Get App</p>
          <div class="button-images">
            <img src="/Utilites/pngegg.png" alt="" />
          </div>
        </div>
      </div>
    </footer>

    <script type="module">
      // Import the functions you need from the SDKs you need
      import { initializeApp } from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js'

      // Add Firebase products that you want to use
      import { getAuth, GoogleAuthProvider, signInWithPopup, signOut, onAuthStateChanged } 
      from 'https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js'


      // https://firebase.google.com/docs/web/setup#available-libraries
      // Your web app's Firebase configuration
      const firebaseConfig = {
          apiKey: "AIzaSyDYDdUx3ZZNAzWL84Ar60fGH7wL_uyd71M",
          authDomain: "formal-folder-376913.firebaseapp.com",
          databaseURL: "https://formal-folder-376913-default-rtdb.firebaseio.com",
          projectId: "formal-folder-376913",
          storageBucket: "formal-folder-376913.appspot.com",
          messagingSenderId: "975600999814",
          appId: "1:975600999814:web:4c0f872050c5c05cc82007"
      };

      // // Production configuration
      // const firebaseConfig = {
      //     apiKey: "",
      //     authDomain: "",
      //     databaseURL: "",
      //     projectId: "",
      //     storageBucket: "",
      //     messagingSenderId: "",
      //     appId: ""
      // };

      // Initialize Firebase
      const app = initializeApp(firebaseConfig);

      // Firebase Auth
      const auth = getAuth();
      const provider = new GoogleAuthProvider();

      const signInButton = document.getElementById("signInButton");
      const signOutButton = document.getElementById("signOutButton");
      const message = document.getElementById("message");
      const userName = document.getElementById("userName");
      const userEmail = document.getElementById("userEmail");

      // Login user
      const userSignIn = async () => {
          signInWithPopup(auth, provider)
          .then((result) => {
              const user = result.user;
              console.log(user);
              console.log('User logged in successfully');
          }).catch((error)=> {
              const errorCode = error.code;
              const errorMessage = error.message;
          })
      }

      // Logout user
      const userSignOut = async () => {
          signOut(auth)
          .then(() => {
              console.log('User logged out successfully');
          }).catch((error)=> {
              const errorCode = error.code;
              const errorMessage = error.message;
          })
      }

      onAuthStateChanged(auth, (user)=>{
          if(user){
              alert(" You signed in");
              signInButton.style.display = "none";
              signOutButton.style.display = "block";
              message.style.display = "block";
              userName.innerHTML = user.displayName;
              userEmail.innerHTML = user.email;

          }else{
              alert("You are not signed in")
              signInButton.style.display = "block";
              signOutButton.style.display = "none";
              message.style.display = "none";
          }
      })

      signInButton.addEventListener('click', userSignIn);
      signOutButton.addEventListener('click', userSignOut);

      // Switch between login and registration forms
      function switchForm(formType) {
    const container = document.getElementById('containerReg');
    const signUpContainer = document.getElementById('signUpContainer');
    const signInContainer = document.getElementById('signInContainer');

    if (formType === 'sign-up-container') {
        container.classList.add('sign-up-mode');
        signUpContainer.classList.add('active');
        signInContainer.classList.remove('active');
    } else {
        container.classList.remove('sign-up-mode');
        signUpContainer.classList.remove('active');
        signInContainer.classList.add('active');
    }
}

      
      // function handleCredentialResponse(response) {
      //     console.log("Encoded JWT ID token: " + response.credential);
      // }
      // window.onload = function () {
      //     google.accounts.id.initialize({
      //     client_id: "YOUR_GOOGLE_CLIENT_ID"
      //     callback: handleCredentialResponse
      //     });
      //     google.accounts.id.renderButton(
      //     document.getElementById("buttonDiv"),
      //     { theme: "outline", size: "large" }  // customization attributes
      //     );
      //     google.accounts.id.prompt(); // also display the One Tap dialog
      // }


      // Register new user
      function register() {
          const userName = document.getElementById('name').value;
          const email = document.getElementById('email').value;
          const passWord = document.getElementById('pass').value;
          const type = document.getElementById('userType').value;

          auth.createUserWithEmailAndPassword(email, passWord)
              .then((userCredential) => {
                  // Add additional user information to the user profile
                  userCredential.user.updateProfile({
                      displayName: userName,
                      userType: type
                  }).then(() => {
                      console.log('User profile updated successfully');
                  }).catch((error) => {
                      console.error('Error updating user profile:', error.message);
                  });

                  console.log('User registered successfully:', userCredential.user.uid);
              })
              .catch((error) => {
                  console.error('Registration failed:', error.message);
                  alert(error.message);
              });
      }

      // Login existing user
      function login() {
          const loginEmail = document.getElementById('loginEmail').value;
          const loginPassword = document.getElementById('loginPassword').value;

          auth.signInWithEmailAndPassword(loginEmail, loginPassword)
              .then((userCredential) => {
                  console.log('User logged in successfully:', userCredential.user.uid);
              })
              .catch((error) => {
                  console.error('Login failed:', error.message);
                  alert(error.message);
              });
      }

      // Logout user
      function logout() {
          auth.signOut()
              .then(() => {
                  console.log('User logged out successfully');
              })
              .catch((error) => {
                  console.error('Logout failed:', error.message);
              });
      }

      // // Auth state change listener
      // auth.onAuthStateChanged((user) => {
      //     const logoutButton = document.getElementById('logoutButton');

      //     if (user) {
      //         console.log('User is logged in:', user.uid);
      //         // Display logout button when user is logged in
      //         logoutButton.style.display = 'block';
      //     } else {
      //         console.log('User is logged out');
      //         // Hide logout button when user is logged out
      //         logoutButton.style.display = 'none';
      //     }
      // });
  </script>
  <script src="../cart-items/home.js"></script>
  </body>
</html>
